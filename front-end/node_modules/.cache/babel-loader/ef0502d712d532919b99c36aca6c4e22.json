{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\EOS Project\\\\front-end\\\\src\\\\View\\\\ContributePage\\\\ContributePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Typography, Button, Form, message, Input, Icon } from 'antd';\nimport FileUpload from './FileUpload.js';\nimport axios from 'axios';\nimport Table from './Table';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title\n} = Typography;\nconst gsValue = [0, 1, 2, 3, 4];\nconst pTypes = [\"Pyroxene\", \"Plagioclase\", \"Other minerals\", \"Altered material\", \"Glassy\"];\nconst gTypes = [\"Juvenile\", \"Non-juvenile\"];\nconst crystallinity = [\"Low Transparent\", \"Low Black\", \"Mid\", \"High\"];\nconst alterations = [\"None\", \"Slight\", \"Moderate\"];\nconst shapes = [\"Blocky\", \"Fluidal\", \"Microtubular\", \"Highly vesicular\", \"Spongy\"];\n\nfunction ContributePage(props) {\n  _s();\n\n  const [volcName, setVolcName] = useState(\"\");\n  const [magnification, setMg] = useState(null);\n  const [gsLow, setGsLow] = useState();\n  const [gsUp, setGsUp] = useState();\n  const [pType, setPType] = useState(\"\");\n  const [gType, setGType] = useState(\"\");\n  const [crys, setCrys] = useState(\"\");\n  const [alteration, setAlt] = useState(\"\");\n  const [shape, setShape] = useState(\"\");\n  const [buttonClicked, setButtonClicked] = useState(false);\n  const [data, setData] = useState([]);\n  const [Images, setImages] = useState([]);\n\n  const onVolcChange = event => {\n    setVolcName(event.currentTarget.value);\n  };\n\n  const onMgChange = event => {\n    setMg(event.currentTarget.value);\n  };\n\n  const onGsLowChange = event => {\n    setGsLow(event.currentTarget.value);\n  };\n\n  const onGsUpChange = event => {\n    setGsUp(event.currentTarget.value);\n  };\n\n  const onPTypeChange = event => {\n    setPType(event.currentTarget.value);\n  };\n\n  const onGTypeChange = event => {\n    setGType(event.currentTarget.value);\n  };\n\n  const onCrysChange = event => {\n    setCrys(event.currentTarget.value);\n  };\n\n  const onAltChange = event => {\n    setAlt(event.currentTarget.value);\n  };\n\n  const onShapeChange = event => {\n    setShape(event.currentTarget.value);\n  };\n\n  const updateImages = newImages => {\n    setImages(newImages);\n  };\n\n  const handleClick = () => {\n    setButtonClicked(true);\n    let newData = [];\n\n    for (var i = 0; i < Images.length; i++) {\n      const particle = {\n        volc_name: volcName,\n        mag: magnification,\n        gsLow: gsLow,\n        gsUp: gsUp,\n        pType: pType,\n        gType: gType,\n        crys: crys,\n        alteration: alteration,\n        shape: shape,\n        image_path: Images[i]\n      };\n      newData.push(particle);\n    }\n\n    setData(newData);\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (!volcName || !magnification || !gsLow || !gsUp) {\n      return alert('Fill all the compulsory fields first!');\n    }\n\n    if (gsLow > gsUp) {\n      return alert('Grain size lower bound cannot be higher than upper bound');\n    }\n\n    var failed = false;\n\n    for (var i = 0; i < data.length; i++) {\n      const particle = {\n        id: i + 1,\n        index: 1,\n        instrument: \"b\",\n        imgURL: data[i].image_path,\n        particleType: data[i].pType,\n        glassyType: data[i].gType,\n        crystallinity: data[i].crys,\n        alteration: data[i].alteration,\n        shape: data[i].shape,\n        volc_id: 1,\n        volc_name: data[i].volc_name,\n        afe_id: 1,\n        gen_id: 1,\n        microscope: \"\",\n        software: \"\",\n        device: \"\",\n        magnification: \"\",\n        ligh_intensity: \"\",\n        epis_dias_light: \"\",\n        scale_ref: \"\"\n      };\n      await axios.post(\"/volcanoes/particles/add\", particle).catch(err => console.log(err), failed = true);\n      const image = {\n        imageURL: `${data[i].image_path}`,\n        gsLow: data[i].gsLow,\n        gsUp: data[i].gsUp,\n        magnification: data[i].magnification,\n        volc_id: 1,\n        par_id: i\n      };\n      await axios.post(\"/volcanoes/images/add\", image).catch(err => console.log(err), failed = true);\n    }\n\n    if (!failed) props.history.push('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"80%\",\n      margin: '2rem auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        level: 2,\n        children: \" Help us expand our Database!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(FileUpload, {\n        refreshFunction: updateImages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Volcano Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: onVolcChange,\n        value: volcName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Magnification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Enter the magnification value in number only (E.g. 1.4 instead of 1.4x)\",\n        onChange: onMgChange,\n        value: magnification,\n        type: \"number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Grain Size:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Lower Bound(\\u03A6)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onGsLowChange,\n        value: gsLow,\n        children: gsValue.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upper Bound(\\u03A6)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onGsUpChange,\n        value: gsUp,\n        children: gsValue.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \" Tell us more about your data (Optional)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Particle Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onPTypeChange,\n        value: pType,\n        children: pTypes.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Glassy Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onGTypeChange,\n        value: gType,\n        children: gTypes.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Crystallinity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onCrysChange,\n        value: crys,\n        children: crystallinity.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Alteration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onAltChange,\n        value: alteration,\n        children: alterations.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: onShapeChange,\n        value: shape,\n        style: {\n          marginBottom: \"10px\"\n        },\n        children: shapes.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item,\n          children: [item, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          handleClick();\n        },\n        style: {\n          marginBottom: \"10px\"\n        },\n        children: \"Show in Table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), buttonClicked ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Table, {\n          data: data,\n          setData: setData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: onSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 32\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ContributePage, \"1puQTs0YTdI69eFZ9beae7nPb9s=\");\n\n_c = ContributePage;\nexport default ContributePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContributePage\");","map":{"version":3,"sources":["C:/Users/User/Desktop/EOS Project/front-end/src/View/ContributePage/ContributePage.js"],"names":["React","useState","useEffect","Typography","Button","Form","message","Input","Icon","FileUpload","axios","Table","Title","gsValue","pTypes","gTypes","crystallinity","alterations","shapes","ContributePage","props","volcName","setVolcName","magnification","setMg","gsLow","setGsLow","gsUp","setGsUp","pType","setPType","gType","setGType","crys","setCrys","alteration","setAlt","shape","setShape","buttonClicked","setButtonClicked","data","setData","Images","setImages","onVolcChange","event","currentTarget","value","onMgChange","onGsLowChange","onGsUpChange","onPTypeChange","onGTypeChange","onCrysChange","onAltChange","onShapeChange","updateImages","newImages","handleClick","newData","i","length","particle","volc_name","mag","image_path","push","onSubmit","preventDefault","alert","failed","id","index","instrument","imgURL","particleType","glassyType","volc_id","afe_id","gen_id","microscope","software","device","ligh_intensity","epis_dias_light","scale_ref","post","catch","err","console","log","image","imageURL","par_id","history","maxWidth","margin","textAlign","marginBottom","map","item"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\nimport { Typography, Button, Form, message, Input, Icon } from 'antd';\nimport FileUpload from './FileUpload.js'\nimport axios from 'axios';\nimport Table from './Table'\nconst { Title } = Typography;\n\nconst gsValue = [0,1,2,3,4];\nconst pTypes  = [\"Pyroxene\",\"Plagioclase\",\"Other minerals\",\"Altered material\",\"Glassy\"];\nconst gTypes = [\"Juvenile\",\"Non-juvenile\"];\nconst crystallinity = [\"Low Transparent\",\"Low Black\", \"Mid\", \"High\"];\nconst alterations = [\"None\", \"Slight\", \"Moderate\"];\nconst shapes = [\"Blocky\", \"Fluidal\", \"Microtubular\",\"Highly vesicular\",\"Spongy\"]\n\nfunction ContributePage(props) {\n    const [volcName, setVolcName] = useState(\"\");\n    const [magnification, setMg] = useState(null);\n    const [gsLow,setGsLow] = useState();\n    const [gsUp,setGsUp] = useState();\n    const [pType,setPType] = useState(\"\");\n    const [gType,setGType] = useState(\"\");\n    const [crys,setCrys] = useState(\"\");\n    const [alteration, setAlt] = useState(\"\");\n    const [shape, setShape] = useState(\"\");\n    const [buttonClicked, setButtonClicked] = useState(false)\n    const [data,setData] = useState([])\n    const [Images, setImages] = useState([])\n\n    const onVolcChange = (event)=>{\n      setVolcName(event.currentTarget.value)\n    } \n    const onMgChange = (event)=>{\n      setMg(event.currentTarget.value)\n    } \n    const onGsLowChange = (event)=>{\n      setGsLow(event.currentTarget.value)\n    } \n    const onGsUpChange = (event)=>{\n      setGsUp(event.currentTarget.value)\n    } \n    const onPTypeChange = (event)=>{\n      setPType(event.currentTarget.value)\n    } \n    const onGTypeChange = (event)=>{\n      setGType(event.currentTarget.value)\n    } \n    const onCrysChange = (event)=>{\n      setCrys(event.currentTarget.value)\n    } \n    const onAltChange = (event)=>{\n      setAlt(event.currentTarget.value)\n    } \n    const onShapeChange = (event)=>{\n      setShape(event.currentTarget.value)\n    } \n    const updateImages = (newImages) => {\n        setImages(newImages)\n    }\n    const handleClick = ()=>{\n        setButtonClicked(true)\n        let newData = []\n        for(var i =0;i<Images.length;i++){\n            const particle={\n                volc_name: volcName,\n              mag: magnification,\n              gsLow: gsLow,\n              gsUp: gsUp,\n              pType: pType,\n              gType: gType,\n              crys: crys,\n              alteration: alteration,\n              shape: shape,\n              image_path:Images[i]\n            }\n            newData.push(particle)\n\n        }\n        setData(newData)\n    }\n    const onSubmit = async(event) => {\n        event.preventDefault();\n\n        if (!volcName || !magnification || !gsLow ||\n            !gsUp  ) {\n            return alert('Fill all the compulsory fields first!')\n        }\n        \n        if(gsLow > gsUp) {\n            return alert('Grain size lower bound cannot be higher than upper bound')\n        }\n        var failed=false;\n        for(var i =0;i<data.length;i++){\n          const particle ={\n            id: i+1,\n            index: 1,\n            instrument:\"b\",\n            imgURL:data[i].image_path,\n            particleType: data[i].pType, \n            glassyType: data[i].gType,\n            crystallinity:data[i].crys, \n            alteration: data[i].alteration, \n            shape:data[i].shape,\n            volc_id: 1,\n            volc_name: data[i].volc_name,\n            afe_id: 1,\n            gen_id: 1,\n            microscope: \"\",\n            software: \"\",\n            device: \"\",\n            magnification: \"\",\n            ligh_intensity: \"\",\n            epis_dias_light: \"\",\n            scale_ref: \"\"\n          }\n           await axios.post(\"/volcanoes/particles/add\", particle)\n              .catch(err=>console.log(err),failed=true)\n          const image={\n              imageURL:`${data[i].image_path}`,\n              gsLow:data[i].gsLow,\n              gsUp: data[i].gsUp,\n              magnification: data[i].magnification,\n              volc_id:1,\n              par_id:i\n          }\n            await axios.post(\"/volcanoes/images/add\",image)\n            .catch(err=>console.log(err),failed=true)\n\n        }\n        \n        if(!failed) props.history.push('/')\n      }\n\n    return (\n        <div style={{ maxWidth:\"80%\",margin: '2rem auto' }}>\n            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>\n                <Title level={2}> Help us expand our Database!</Title>\n            </div>\n\n\n            <Form onSubmit={onSubmit} >\n\n                {/* DropZone */}\n                <FileUpload refreshFunction={updateImages} />\n\n                <br />\n                <br />\n                <label>Volcano Name</label>\n                <Input\n                    onChange={onVolcChange}\n                    value={volcName}\n                />\n                <br />\n                <br />\n                <label>Magnification</label>\n                <Input\n                    placeholder=\"Enter the magnification value in number only (E.g. 1.4 instead of 1.4x)\"\n                    onChange={onMgChange}\n                    value={magnification}\n                    type= \"number\"\n                />\n                <br /><br />\n                <label>Grain Size:</label>\n                <label>Lower Bound(Φ)</label>\n                <select onChange={onGsLowChange} value={gsLow}>\n                    {gsValue.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <label>Upper Bound(Φ)</label>\n                <select onChange={onGsUpChange} value={gsUp}>\n                    {gsValue.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <h4> Tell us more about your data (Optional)</h4>\n                <label>Particle Type</label>\n                <select onChange={onPTypeChange} value={pType}>\n                    {pTypes.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <label>Glassy Type</label>\n                <select onChange={onGTypeChange} value={gType}>\n                    {gTypes.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <label>Crystallinity</label>\n                <select onChange={onCrysChange} value={crys}>\n                    {crystallinity.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <label>Alteration</label>\n                <select onChange={onAltChange} value={alteration}>\n                    {alterations.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <label>Shape</label>\n                <select onChange={onShapeChange} value={shape} style={{marginBottom:\"10px\"}}>\n                    {shapes.map(item => (\n                        <option value={item}>{item} </option>\n                    ))}\n                </select>\n                <br /><br />\n                <Button\n                    onClick={()=>{handleClick()}}\n                    style={{marginBottom:\"10px\"}}\n                >\n                    Show in Table\n                </Button>\n                <br/>\n                {buttonClicked?<div>\n                    <Table data={data} setData={setData}/>\n                    <br/>\n                    <Button\n                    onClick={onSubmit}\n                    >\n                     Submit\n                    </Button>\n                    </div>:null}\n                \n\n            </Form>\n\n        </div>\n    )\n}\n\nexport default ContributePage"]},"metadata":{},"sourceType":"module"}