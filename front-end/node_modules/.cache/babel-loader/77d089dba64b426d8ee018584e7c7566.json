{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\EOS Project\\\\front-end\\\\src\\\\View\\\\ContributePage\\\\ContributePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport FileUpload from './FileUpload.js';\nimport axios from 'axios';\nimport Table from './Table';\nimport { Grid, TextField, Button, Card, CardContent, Typography } from '@material-ui/core';\nimport { contributeStyle } from './ContributePage.style.tsx';\nimport MenuItem from '@mui/material/MenuItem';\nimport { OndemandVideo } from '@material-ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title\n} = Typography;\nconst gsValue = [0, 1, 2, 3, 4];\nconst pTypes = [\"Pyroxene\", \"Plagioclase\", \"Other minerals\", \"Altered material\", \"Glassy\"];\nconst gTypes = [\"Juvenile\", \"Non-juvenile\"];\nconst crystallinity = [\"Low Transparent\", \"Low Black\", \"Mid\", \"High\"];\nconst alterations = [\"None\", \"Slight\", \"Moderate\"];\nconst shapes = [\"Blocky\", \"Fluidal\", \"Microtubular\", \"Highly vesicular\", \"Spongy\"];\nconst currencies = [{\n  value: 'USD',\n  label: '$'\n}, {\n  value: 'EUR',\n  label: '€'\n}, {\n  value: 'BTC',\n  label: '฿'\n}, {\n  value: 'JPY',\n  label: '¥'\n}];\n\nfunction ContributePage(props) {\n  _s();\n\n  const classes = contributeStyle();\n  const [volcName, setVolcName] = useState(\"\");\n  const [volcValid, setVolcValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [magnification, setMg] = useState(null);\n  const [magValid, setMagValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [gsLow, setGsLow] = useState();\n  const [gsLowValid, setGsLowValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [gsUp, setGsUp] = useState();\n  const [gsUpValid, setGsUpValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [pType, setPType] = useState(\"\");\n  const [pValid, setPValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [gType, setGType] = useState('');\n  const [gValid, setGValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [crys, setCrys] = useState(\"\");\n  const [crysValid, setCrysValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [alteration, setAlt] = useState(\"\");\n  const [altValid, setAltValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [shape, setShape] = useState('');\n  const [shapeValid, setShapeValid] = useState({\n    error: false,\n    helperText: \"\"\n  });\n  const [buttonClicked, setButtonClicked] = useState(false);\n  const [data, setData] = useState([]);\n  const [Images, setImages] = useState([]);\n\n  const onVolcChange = event => {\n    setVolcName(event.target.value);\n  };\n\n  const onMgChange = event => {\n    setMg(event.target.value);\n  };\n\n  const onGsLowChange = event => {\n    setGsLow(event.target.value);\n  };\n\n  const onGsUpChange = event => {\n    setGsUp(event.target.value);\n  };\n\n  const onPTypeChange = event => {\n    setPType(event.target.value);\n  };\n\n  const onGTypeChange = event => {\n    setGType(event.target.value);\n  };\n\n  const onCrysChange = event => {\n    setCrys(event.target.value);\n  };\n\n  const onAltChange = event => {\n    setAlt(event.target.value);\n  };\n\n  const onShapeChange = event => {\n    setShape(event.target.value);\n  };\n\n  const updateImages = newImages => {\n    setImages(newImages);\n  };\n\n  const onDelete = image => {\n    const currentIndex = Images.indexOf(image);\n    let newImages = [...Images];\n    newImages.splice(currentIndex, 1);\n    setImages(newImages);\n  };\n\n  const checkValidData = () => {\n    let valid = true;\n    const nullError = {\n      error: true,\n      helperText: \"This field cannot be blank\"\n    };\n    const isValid = {\n      error: false,\n      helperText: \"\"\n    };\n\n    if (!volcName) {\n      setVolcValid(nullError);\n      valid = false;\n    } else {\n      setVolcValid(isValid);\n    }\n\n    if (magnification == null) {\n      setMagValid(nullError);\n      valid = false;\n    } else {\n      setMagValid(isValid);\n    }\n\n    if (gsLow == null) {\n      setGsLowValid(nullError);\n      valid = false;\n    } else {\n      setGsLowValid(isValid);\n    }\n\n    if (gsUp == null) {\n      setGsUpValid(nullError);\n      valid = false;\n    } else {\n      setGsUpValid(isValid);\n    }\n\n    if (gsLow != null && gsUp != null && gsLow > gsUp) {\n      setGsLowValid({\n        error: true,\n        helperText: \"Lower Bound cannot not be greater than Upper Bound\"\n      });\n      valid = false;\n    }\n\n    return valid;\n  };\n\n  const handleClick = () => {\n    if (checkValidData()) {\n      setButtonClicked(true);\n      let newData = [];\n\n      for (var i = 0; i < Images.length; i++) {\n        const particle = {\n          volc_name: volcName,\n          mag: magnification,\n          gsLow: gsLow,\n          gsUp: gsUp,\n          pType: pType,\n          gType: gType,\n          crys: crys,\n          alteration: alteration,\n          shape: shape,\n          image_path: Images[i]\n        };\n        newData.push(particle);\n      }\n\n      setData(newData);\n    }\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (checkValidData()) {\n      var failed = false;\n\n      for (var i = 0; i < data.length; i++) {\n        const particle = {\n          id: i + 1,\n          index: 1,\n          instrument: \"b\",\n          imgURL: data[i].image_path,\n          particleType: data[i].pType,\n          glassyType: data[i].gType,\n          crystallinity: data[i].crys,\n          alteration: data[i].alteration,\n          shape: data[i].shape,\n          volc_id: 1,\n          volc_name: data[i].volc_name,\n          afe_id: 1,\n          gen_id: 1,\n          microscope: \"\",\n          software: \"\",\n          device: \"\",\n          magnification: \"\",\n          ligh_intensity: \"\",\n          epis_dias_light: \"\",\n          scale_ref: \"\"\n        };\n        await axios.post(\"/volcanoes/particles/add\", particle).catch(err => console.log(err), failed = true);\n        const image = {\n          imageURL: `${data[i].image_path}`,\n          gsLow: data[i].gsLow,\n          gsUp: data[i].gsUp,\n          magnification: data[i].magnification,\n          volc_id: 1,\n          par_id: i\n        };\n        await axios.post(\"/volcanoes/images/add\", image).catch(err => console.log(err), failed = true);\n      }\n\n      if (!failed) props.history.push('/');else {\n        return alert(\"Upload failed! Please try again!\");\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"80%\",\n      margin: '2rem auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      gutterBottom: true,\n      variant: \"h4\",\n      align: \"center\",\n      style: {\n        fontWeight: \"600\"\n      },\n      children: \"Help Us Expand Our Database!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          maxWidth: \"100%\",\n          padding: \"20px 5px\",\n          margin: \"0 auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: \"20px 5px\"\n              },\n              children: /*#__PURE__*/_jsxDEV(FileUpload, {\n                Images: Images,\n                setImages: setImages,\n                onDelete: onDelete\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 1,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                xs: 12,\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  placeholder: \"Enter volcano name\",\n                  label: \"Volcano Name\",\n                  variant: \"outlined\",\n                  value: volcName,\n                  onChange: onVolcChange,\n                  fullWidth: true,\n                  error: volcValid.error,\n                  helperText: volcValid.helperText,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  placeholder: \"Enter number only (E.g. 1.4 instead of 1.4x)\",\n                  label: \"Magnification\",\n                  variant: \"outlined\",\n                  type: \"number\",\n                  value: magnification,\n                  onChange: onMgChange,\n                  error: magValid.error,\n                  helperText: magValid.helperText,\n                  fullWidth: true,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Grain Size Lower Bound\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: gsLow,\n                  onChange: onGsLowChange,\n                  fullWidth: true,\n                  error: gsLowValid.error,\n                  helperText: gsLowValid.error ? gsLowValid.helperText : \"Please ensure Upper Bound is greater than or equal to Lower Bound\",\n                  required: true,\n                  children: gsValue.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Grain Size Upper Bound\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: gsUp,\n                  onChange: onGsUpChange,\n                  error: gsUpValid.error,\n                  helperText: gsUpValid.helperText,\n                  fullWidth: true,\n                  required: true,\n                  children: gsValue.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    color: \"#7d7d7d\"\n                  },\n                  children: \" Tell us more about your data (optional):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Particle Type\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: pType,\n                  onChange: onPTypeChange,\n                  fullWidth: true,\n                  optional: true,\n                  children: pTypes.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 28\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Shape\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: shape,\n                  onChange: onShapeChange,\n                  fullWidth: true,\n                  optional: true,\n                  children: shapes.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Glassy Type\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: gType,\n                  onChange: onGTypeChange,\n                  fullWidth: true,\n                  optional: true,\n                  children: gTypes.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Crystallinity\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: crys,\n                  onChange: onCrysChange,\n                  fullWidth: true,\n                  optional: true,\n                  children: crystallinity.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 4,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  label: \"Alteration\",\n                  variant: \"outlined\",\n                  select: true,\n                  value: alteration,\n                  onChange: onAltChange,\n                  fullWidth: true,\n                  optional: true,\n                  children: alterations.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: item,\n                    children: [item, \" \"]\n                  }, item, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), buttonClicked ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: classes.tableButton,\n              variant: \"contained\",\n              color: \"success\",\n              onClick: () => {\n                handleClick();\n              },\n              style: {\n                marginBottom: \"10px\"\n              },\n              children: \"Refresh Table\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              data: data,\n              setData: setData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.tableButton,\n              variant: \"contained\",\n              color: \"success\",\n              onClick: () => {\n                handleClick();\n              },\n              style: {\n                marginBottom: \"10px\"\n              },\n              children: \"Show in Table\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: classes.submitButton,\n            variant: \"contained\",\n            onClick: onSubmit,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ContributePage, \"6BzyRCERmbO/+bwwkUllg9SfI4c=\");\n\n_c = ContributePage;\nexport default ContributePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContributePage\");","map":{"version":3,"sources":["C:/Users/User/Desktop/EOS Project/front-end/src/View/ContributePage/ContributePage.js"],"names":["React","useState","useEffect","FileUpload","axios","Table","Grid","TextField","Button","Card","CardContent","Typography","contributeStyle","MenuItem","OndemandVideo","Title","gsValue","pTypes","gTypes","crystallinity","alterations","shapes","currencies","value","label","ContributePage","props","classes","volcName","setVolcName","volcValid","setVolcValid","error","helperText","magnification","setMg","magValid","setMagValid","gsLow","setGsLow","gsLowValid","setGsLowValid","gsUp","setGsUp","gsUpValid","setGsUpValid","pType","setPType","pValid","setPValid","gType","setGType","gValid","setGValid","crys","setCrys","crysValid","setCrysValid","alteration","setAlt","altValid","setAltValid","shape","setShape","shapeValid","setShapeValid","buttonClicked","setButtonClicked","data","setData","Images","setImages","onVolcChange","event","target","onMgChange","onGsLowChange","onGsUpChange","onPTypeChange","onGTypeChange","onCrysChange","onAltChange","onShapeChange","updateImages","newImages","onDelete","image","currentIndex","indexOf","splice","checkValidData","valid","nullError","isValid","handleClick","newData","i","length","particle","volc_name","mag","image_path","push","onSubmit","preventDefault","failed","id","index","instrument","imgURL","particleType","glassyType","volc_id","afe_id","gen_id","microscope","software","device","ligh_intensity","epis_dias_light","scale_ref","post","catch","err","console","log","imageURL","par_id","history","alert","maxWidth","margin","fontWeight","padding","map","item","color","tableButton","marginBottom","submitButton"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\nimport FileUpload from './FileUpload.js'\nimport axios from 'axios';\nimport Table from './Table'\nimport { Grid, TextField, Button, Card, CardContent, Typography } from '@material-ui/core';\nimport { contributeStyle } from './ContributePage.style.tsx';\nimport MenuItem from '@mui/material/MenuItem';\nimport { OndemandVideo } from '@material-ui/icons';\nconst { Title } = Typography;\n\nconst gsValue = [0,1,2,3,4];\nconst pTypes  = [\"Pyroxene\",\"Plagioclase\",\"Other minerals\",\"Altered material\",\"Glassy\"];\nconst gTypes = [\"Juvenile\",\"Non-juvenile\"];\nconst crystallinity = [\"Low Transparent\",\"Low Black\", \"Mid\", \"High\"];\nconst alterations = [\"None\", \"Slight\", \"Moderate\"];\nconst shapes = [\"Blocky\", \"Fluidal\", \"Microtubular\",\"Highly vesicular\",\"Spongy\"]\nconst currencies = [\n    {\n      value: 'USD',\n      label: '$',\n    },\n    {\n      value: 'EUR',\n      label: '€',\n    },\n    {\n      value: 'BTC',\n      label: '฿',\n    },\n    {\n      value: 'JPY',\n      label: '¥',\n    },\n  ];\n\nfunction ContributePage(props) {\n    const classes = contributeStyle();\n    const [volcName, setVolcName] = useState(\"\");\n    const [volcValid,setVolcValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [magnification, setMg] = useState(null);\n    const [magValid,setMagValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [gsLow,setGsLow] = useState();\n    const [gsLowValid,setGsLowValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [gsUp,setGsUp] = useState();\n    const [gsUpValid,setGsUpValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [pType,setPType] = useState(\"\");\n    const [pValid,setPValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [gType,setGType] = useState('');\n    const [gValid,setGValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [crys,setCrys] = useState(\"\");\n    const [crysValid,setCrysValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [alteration, setAlt] = useState(\"\");\n    const [altValid,setAltValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [shape, setShape] = useState('');\n    const [shapeValid,setShapeValid] = useState({\n        error:false,\n        helperText:\"\"\n    })\n    const [buttonClicked, setButtonClicked] = useState(false)\n    const [data,setData] = useState([])\n    const [Images, setImages] = useState([])\n\n    const onVolcChange = (event)=>{\n      setVolcName(event.target.value)\n    } \n    const onMgChange = (event)=>{\n      setMg(event.target.value)\n    } \n    const onGsLowChange = (event)=>{\n        setGsLow(event.target.value)\n    } \n    const onGsUpChange = (event)=>{\n      setGsUp(event.target.value)\n    } \n    const onPTypeChange = (event)=>{\n      setPType(event.target.value)\n    } \n    const onGTypeChange = (event)=>{\n      setGType(event.target.value)\n    } \n    const onCrysChange = (event)=>{\n      setCrys(event.target.value)\n    } \n    const onAltChange = (event)=>{\n      setAlt(event.target.value)\n    } \n    const onShapeChange = (event)=>{\n      setShape(event.target.value)\n    } \n    const updateImages = (newImages) => {\n        setImages(newImages)\n    }\n    const onDelete = (image) => {\n      const currentIndex = Images.indexOf(image);\n      \n      let newImages = [...Images]\n      newImages.splice(currentIndex, 1)\n\n      setImages(newImages)\n  }\n    const checkValidData = ()=>{\n      let valid = true;\n      const nullError={\n        error:true,\n        helperText:\"This field cannot be blank\"\n      }\n      const isValid={\n        error:false,\n        helperText:\"\"\n      }\n      if(!volcName){setVolcValid(nullError);valid=false}\n      else{\n        setVolcValid(isValid);\n      }\n      if(magnification==null){setMagValid(nullError);valid=false}\n      else{\n        setMagValid(isValid);\n      }\n      if(gsLow==null){setGsLowValid(nullError);valid=false}\n      else{\n        setGsLowValid(isValid);\n      }\n      if(gsUp==null){setGsUpValid(nullError);valid=false}\n      else{\n        setGsUpValid(isValid);\n      }\n      if(gsLow!=null && gsUp!=null && gsLow>gsUp){\n        setGsLowValid({\n          error:true,\n          helperText:\"Lower Bound cannot not be greater than Upper Bound\"\n        })\n        valid=false}\n      return valid;\n    }\n    const handleClick = ()=>{\n        if(checkValidData()){\n          setButtonClicked(true)\n          let newData = []\n          for(var i =0;i<Images.length;i++){\n              const particle={\n                  volc_name: volcName,\n                mag: magnification,\n                gsLow: gsLow,\n                gsUp: gsUp,\n                pType: pType,\n                gType: gType,\n                crys: crys,\n                alteration: alteration,\n                shape: shape,\n                image_path:Images[i]\n              }\n              newData.push(particle)\n\n          }\n          setData(newData)\n      }\n    }\n    const onSubmit = async(event) => {\n        event.preventDefault();\n        if(checkValidData()){\n          var failed=false;\n          for(var i =0;i<data.length;i++){\n            const particle ={\n              id: i+1,\n              index: 1,\n              instrument:\"b\",\n              imgURL:data[i].image_path,\n              particleType: data[i].pType, \n              glassyType: data[i].gType,\n              crystallinity:data[i].crys, \n              alteration: data[i].alteration, \n              shape:data[i].shape,\n              volc_id: 1,\n              volc_name: data[i].volc_name,\n              afe_id: 1,\n              gen_id: 1,\n              microscope: \"\",\n              software: \"\",\n              device: \"\",\n              magnification: \"\",\n              ligh_intensity: \"\",\n              epis_dias_light: \"\",\n              scale_ref: \"\"\n            }\n            await axios.post(\"/volcanoes/particles/add\", particle)\n                .catch(err=>console.log(err),failed=true)\n            const image={\n                imageURL:`${data[i].image_path}`,\n                gsLow:data[i].gsLow,\n                gsUp: data[i].gsUp,\n                magnification: data[i].magnification,\n                volc_id:1,\n                par_id:i\n            }\n              await axios.post(\"/volcanoes/images/add\",image)\n              .catch(err=>console.log(err),failed=true)\n\n          }\n          \n          if(!failed) props.history.push('/')\n          else{\n            return alert(\"Upload failed! Please try again!\")\n          }\n        }\n      }\n    return (\n        <div style={{ maxWidth:\"80%\",margin: '2rem auto' }}>\n            <Typography gutterBottom variant=\"h4\" align=\"center\" style={{fontWeight:\"600\"}} >\n        Help Us Expand Our Database!\n       </Typography>\n      <Grid>\n        <Card style={{ maxWidth: \"100%\", padding: \"20px 5px\", margin: \"0 auto\" }}>\n          <CardContent>\n\n            <form>\n            <div style={{padding: \"20px 5px\"}}>\n                <FileUpload Images={Images} setImages={setImages} onDelete={onDelete}/>\n            </div>\n              <Grid container spacing={1}>\n                <Grid xs={12} item>\n                  <TextField \n                    placeholder=\"Enter volcano name\" \n                    label=\"Volcano Name\" \n                    variant=\"outlined\" \n                    value={volcName}\n                    onChange={onVolcChange}\n                    fullWidth\n                    error={volcValid.error} \n                    helperText={volcValid.helperText}\n                    required />\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                    <TextField \n                        placeholder=\"Enter number only (E.g. 1.4 instead of 1.4x)\" \n                        label=\"Magnification\" \n                        variant=\"outlined\" \n                        type=\"number\"\n                        value={magnification}\n                        onChange={onMgChange}\n                        error={magValid.error} \n                        helperText={magValid.helperText}\n                        fullWidth \n                        required >\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                    <TextField \n                        label=\"Grain Size Lower Bound\" \n                        variant=\"outlined\" \n                        select\n                        value={gsLow}\n                        onChange={onGsLowChange}\n                        fullWidth\n                        error={gsLowValid.error} \n                        helperText={gsLowValid.error?gsLowValid.helperText:\"Please ensure Upper Bound is greater than or equal to Lower Bound\"}\n                        required >\n                            {gsValue.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                        </TextField>\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                    <TextField \n                        label=\"Grain Size Upper Bound\" \n                        variant=\"outlined\" \n                        select\n                        value={gsUp}\n                        onChange={onGsUpChange}\n                        error={gsUpValid.error} \n                        helperText={gsUpValid.helperText}\n                        fullWidth \n                        required >\n                            {gsValue.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} >\n                    <Typography style={{color:\"#7d7d7d\"}}> Tell us more about your data (optional):</Typography>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <TextField \n                        label=\"Particle Type\" \n                        variant=\"outlined\" \n                        select\n                        value={pType}\n                        onChange={onPTypeChange}\n                        fullWidth \n                        optional >\n                            {pTypes.map(item => (\n                           <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                <TextField \n                        label=\"Shape\" \n                        variant=\"outlined\" \n                        select\n                        value={shape}\n                        onChange={onShapeChange}\n                        fullWidth \n                        optional >\n                            {shapes.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                <TextField \n                        label=\"Glassy Type\" \n                        variant=\"outlined\" \n                        select\n                        value={gType}\n                        onChange={onGTypeChange}\n                        fullWidth \n                        optional >\n                            {gTypes.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                <TextField \n                        label=\"Crystallinity\" \n                        variant=\"outlined\" \n                        select\n                        value={crys}\n                        onChange={onCrysChange}\n                        fullWidth \n                        optional >\n                            {crystallinity.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n                <Grid item xs={12} sm={4}>\n                <TextField \n                        label=\"Alteration\" \n                        variant=\"outlined\" \n                        select\n                        value={alteration}\n                        onChange={onAltChange}\n                        fullWidth \n                        optional >\n                            {alterations.map(item => (\n                            <MenuItem key = {item} value={item}>{item} </MenuItem>\n                            ))}\n                    </TextField>\n                </Grid>\n              </Grid>\n            </form>\n            {buttonClicked?<div>\n                    <Button\n                        className={classes.tableButton}\n                        variant=\"contained\" \n                        color=\"success\"\n                        onClick={()=>{handleClick()}}\n                        style={{marginBottom:\"10px\"}}\n                >\n                    Refresh Table\n                </Button>\n                    <Table data={data} setData={setData}/>\n                    </div>:\n                    <div>                \n                    <Button\n                        className={classes.tableButton}\n                        variant=\"contained\" \n                        color=\"success\"\n                        onClick={()=>{handleClick()}}\n                        style={{marginBottom:\"10px\"}}\n                >\n                    Show in Table\n                </Button></div>}\n                        <Button\n                            className={classes.submitButton}\n                            variant=\"contained\" \n                            onClick={onSubmit}\n                            >\n                            Submit\n                        </Button>\n\n                \n          </CardContent>\n        </Card>\n      </Grid>\n        </div>\n    )\n}\n\nexport default ContributePage"]},"metadata":{},"sourceType":"module"}